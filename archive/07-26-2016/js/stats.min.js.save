var Stats = function (id) {
	var mode = 0;
	var container = document.getElementById( id );
	var beginTime = ( performance || Date ).now(), prevTime = beginTime, frames = 0;
	var fpsPanel = new Stats.Panel( 'Hz', '#0ff', '#002', id );

	return {
		REVISION: 16,
		dom: container,

		begin: function () {
			beginTime = ( performance || Date ).now();
		},

		end: function () {
			frames ++;
			var time = ( performance || Date ).now();
			fpsPanel.update( ( frames * 1000 ) / ( time - prevTime ), 100);
			prevTime = time;
			frames = 0;
			return time;
		},

		update: function () {
			beginTime = this.end();
		},

		domElement: container,
	};
};

Stats.Panel = function ( name, fg, bg, id ) {
	var min = Infinity, max = 0, round = Math.round;
	var WIDTH = 50, HEIGHT = 10,
            TEXT_X = 0, TEXT_Y = 0;

	var canvas = document.getElementById( id );
	var context = canvas.getContext( '2d' );
	context.font = 'bold 15px Hevetica,Arial,sans-serif';
	context.textBaseline = 'top';
	context.fillStyle = bg;
	context.fillStyle = fg;
	context.fillText( name, 0, 0);
	context.fillStyle = bg;
	context.globalAlpha = 0.9;

	return {
		dom: canvas,
		update: function ( value, maxValue ) {
			min = Math.min( min, value );
			max = Math.max( max, value );
			if(context.canvas.id == "FPSCanvas") {
				context.fillStyle = bg;
				context.globalAlpha = 1;
				context.clearRect(0,0,35, 15);
				context.fillStyle = fg;
				context.fillText( round( value ) + ' Hz' , 0, 0);
				context.fillStyle = bg;
				context.globalAlpha = 0.9;
			}
		}
	};
};

if ( typeof module === 'object' ) {
	module.exports = Stats;
}
